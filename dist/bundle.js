!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCollide=function(e,t){for(var n=t.tetrominoe,r=t.speed,o=0;o<n.length;++o)for(var a=0;a<n[o].length;++a)if(0!==n[o][a]&&0!==(e[o+r.speedY]&&e[o+r.speedY][a+r.speedX]))return!0;return!1}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.GameBoard=void 0;var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"createMatrix",value:function(e,t){for(var n=[];t--;)n.push(new Array(e).fill(0));return n}},{key:"fillgameBoard",value:function(e,t){t.tetrominoe.forEach(function(n,r){n.forEach(function(n,o){0!==n&&(e[r+t.speed.speedY][o+t.speed.speedX]=n)})})}},{key:"resetBoard",value:function(e,t){e.forEach(function(e){return e.fill(0)}),t.score=0,updateScore()}},{key:"updateGameBoard",value:function(e,t){var n=[],r=1;e:for(var o=e.length-1;o>0;--o){for(var a=e[o],i=0;i<a.length;++i)if(0===e[o][i])continue e;n=e.splice(o,1)[0].fill(0),console.log("fill",n),e.unshift(n),++o,t.score+=10*r,r++}}}])&&r(t.prototype,n),o&&r(t,o),e}();t.GameBoard=o},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Rotate=void 0;var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"rotateShapeLeft",value:function(e){e.tetrominoe;return e.tetrominoe.reverse()}},{key:"rotateShapeRight",value:function(e){e.tetrominoe;for(var t=0;t<e.tetrominoe.length;t++)for(var n=0;n<t;n++){var r=e.tetrominoe[t][n];e.tetrominoe[t][n]=e.tetrominoe[n][t],e.tetrominoe[n][t]=r}return e.tetrominoe.forEach(function(e){return e.reverse()})}}])&&r(t.prototype,n),o&&r(t,o),e}();t.Rotate=o},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=void 0;var o=document.getElementById("testCanvas").getContext("2d"),a=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.speed=t,this.tetrominoe=n,this.score=r}var t,n,a;return t=e,(n=[{key:"shapeDraw",value:function(e,t){e.forEach(function(e,n){e.forEach(function(e,r){0!==e&&(o.fillStyle="red",o.fillRect(r+t.speedX,n+t.speedY,1,1))})})}}])&&r(t.prototype,n),a&&r(t,a),e}();t.Shape=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayOfShapes=function(){return[[[0,0,0],[1,1,1],[0,1,0]],[[1,1],[1,1]],[[0,1,0],[0,1,0],[0,1,0]],[[1,0,0],[1,1,1],[0,0,0]],[[1,1,0],[0,1,1],[0,0,0]]]}},function(e,t,n){"use strict";var r=n(4),o=n(3),a=n(2),i=n(1),u=n(0),c=(0,r.ArrayOfShapes)(),f=document.getElementById("testCanvas"),s=new o.Shape,l=new i.GameBoard,d=f.getContext("2d");function p(e,t){return Math.floor(Math.random()*(t-e))+e}f.width=200,f.height=400,d.scale(10,10);var h=p(0,c.length-1),v=l.createMatrix(20,40);var y=50,m=0;function g(){if(b.speed.speedY++,(0,u.isCollide)(v,b)){b.speed.speedY--,l.fillgameBoard(v,b);for(var e=0;e<v.length;e++)for(var t=0;t<v[e].length;t++)0!==v[0][t]&&l.resetBoard(v,b);l.updateGameBoard(v,b),k(),b.tetrominoe=c[p(0,c.length-1)],b.speed.speedX=(v[0].length/2|0)-(b.tetrominoe[0].length/2|0),b.speed.speedY=0}m=0}var b=new o.Shape({speedX:0,speedY:0},c[h],0);function w(e){b.speed.speedX+=e,(0,u.isCollide)(v,b)&&(b.speed.speedX-=e)}function k(){document.getElementById("score").innerHTML="Score : "+b.score}var C=new a.Rotate;document.addEventListener("keydown",function(e){37===e.keyCode&&w(-1),39===e.keyCode&&w(1),40===e.keyCode&&g(),81===e.keyCode&&C.rotateShapeRight(b),87===e.keyCode&&C.rotateShapeLeft(b)}),k(),function e(){++m>y&&g(),d.clearRect(0,0,f.width,f.height),s.shapeDraw(v,{speedX:0,speedY:0}),s.shapeDraw(b.tetrominoe,b.speed),requestAnimationFrame(e)}()},function(e,t,n){"use strict";n(5),n(8)},,function(e,t){}]);